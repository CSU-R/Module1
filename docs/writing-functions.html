<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.2 Writing Functions | R Module 1</title>
  <meta name="description" content="This is the book for the R Intro Course at CSU." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="6.2 Writing Functions | R Module 1" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the book for the R Intro Course at CSU." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.2 Writing Functions | R Module 1" />
  
  <meta name="twitter:description" content="This is the book for the R Intro Course at CSU." />
  

<meta name="author" content="Alex Fout" />
<meta name="author" content="Lane Drew" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basic-control-flow.html"/>
<link rel="next" href="advanced-control-flow.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="src/style.css" type="text/css" />
<link rel="stylesheet" href="src/environments.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Module 1</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="index.html"><a href="index.html#how-to-navigate-this-book"><i class="fa fa-check"></i><b>1.0.1</b> How To Navigate This Book</a></li>
<li class="chapter" data-level="1.1" data-path="associated-csu-course.html"><a href="associated-csu-course.html"><i class="fa fa-check"></i><b>1.1</b> Associated CSU Course</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prelim.html"><a href="prelim.html"><i class="fa fa-check"></i><b>2</b> Course Preliminaries</a>
<ul>
<li class="chapter" data-level="2.1" data-path="this-textbook.html"><a href="this-textbook.html"><i class="fa fa-check"></i><b>2.1</b> This Textbook</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="this-textbook.html"><a href="this-textbook.html#special-boxes"><i class="fa fa-check"></i><b>2.1.1</b> Special Boxes</a></li>
<li class="chapter" data-level="2.1.2" data-path="this-textbook.html"><a href="this-textbook.html#how-this-book-displays-code"><i class="fa fa-check"></i><b>2.1.2</b> How This Book Displays Code</a></li>
<li class="chapter" data-level="2.1.3" data-path="this-textbook.html"><a href="this-textbook.html#next-steps"><i class="fa fa-check"></i><b>2.1.3</b> Next Steps</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="course-topics-syllabus.html"><a href="course-topics-syllabus.html"><i class="fa fa-check"></i><b>2.2</b> Course Topics &amp; Syllabus</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="course-topics-syllabus.html"><a href="course-topics-syllabus.html#syllabus"><i class="fa fa-check"></i><b>2.2.1</b> Syllabus</a></li>
<li class="chapter" data-level="2.2.2" data-path="course-topics-syllabus.html"><a href="course-topics-syllabus.html#assignment-templates"><i class="fa fa-check"></i><b>2.2.2</b> Assignment Templates</a></li>
<li class="chapter" data-level="2.2.3" data-path="course-topics-syllabus.html"><a href="course-topics-syllabus.html#course-policies"><i class="fa fa-check"></i><b>2.2.3</b> Course Policies</a></li>
<li class="chapter" data-level="2.2.4" data-path="course-topics-syllabus.html"><a href="course-topics-syllabus.html#grading-scale"><i class="fa fa-check"></i><b>2.2.4</b> Grading Scale</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="running-your-first-r-code.html"><a href="running-your-first-r-code.html"><i class="fa fa-check"></i><b>2.3</b> Running your first R Code</a></li>
<li class="chapter" data-level="2.4" data-path="getoutoftheclass.html"><a href="getoutoftheclass.html"><i class="fa fa-check"></i><b>2.4</b> What do you hope to get out of this course?</a></li>
<li class="chapter" data-level="2.5" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2.5</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="what-is-r.html"><a href="what-is-r.html#r-is-a-programming-language"><i class="fa fa-check"></i><b>2.5.1</b> R is a Programming Language</a></li>
<li class="chapter" data-level="2.5.2" data-path="what-is-r.html"><a href="what-is-r.html#r-is-software"><i class="fa fa-check"></i><b>2.5.2</b> R is software</a></li>
<li class="chapter" data-level="2.5.3" data-path="what-is-r.html"><a href="what-is-r.html#r-is-free"><i class="fa fa-check"></i><b>2.5.3</b> R is Free</a></li>
<li class="chapter" data-level="2.5.4" data-path="what-is-r.html"><a href="what-is-r.html#r-is-open-source"><i class="fa fa-check"></i><b>2.5.4</b> R is Open Source</a></li>
<li class="chapter" data-level="2.5.5" data-path="what-is-r.html"><a href="what-is-r.html#r-is-an-ecosystem"><i class="fa fa-check"></i><b>2.5.5</b> R is an ecosystem</a></li>
<li class="chapter" data-level="2.5.6" data-path="what-is-r.html"><a href="what-is-r.html#r-packages"><i class="fa fa-check"></i><b>2.5.6</b> R Packages</a></li>
<li class="chapter" data-level="2.5.7" data-path="what-is-r.html"><a href="what-is-r.html#r-interfaces"><i class="fa fa-check"></i><b>2.5.7</b> R Interfaces</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="the-r-community.html"><a href="the-r-community.html"><i class="fa fa-check"></i><b>2.6</b> The R Community</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="the-r-community.html"><a href="the-r-community.html#places-to-get-help-if-youre-a-student-taking-this-class-for-credit"><i class="fa fa-check"></i><b>2.6.1</b> Places to Get Help (If you’re a student taking this class for credit)</a></li>
<li class="chapter" data-level="2.6.2" data-path="the-r-community.html"><a href="the-r-community.html#places-to-get-help-anyone"><i class="fa fa-check"></i><b>2.6.2</b> Places to Get Help (anyone)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>3</b> Installing R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="computer-basics.html"><a href="computer-basics.html"><i class="fa fa-check"></i><b>3.1</b> Computer Basics</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="computer-basics.html"><a href="computer-basics.html#operating-systems"><i class="fa fa-check"></i><b>3.1.1</b> Operating Systems</a></li>
<li class="chapter" data-level="3.1.2" data-path="computer-basics.html"><a href="computer-basics.html#files-directory-structures"><i class="fa fa-check"></i><b>3.1.2</b> Files &amp; Directory Structures</a></li>
<li class="chapter" data-level="3.1.3" data-path="computer-basics.html"><a href="computer-basics.html#downloads-and-installations"><i class="fa fa-check"></i><b>3.1.3</b> Downloads and Installations</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="install-r-r-studio.html"><a href="install-r-r-studio.html"><i class="fa fa-check"></i><b>3.2</b> Install R &amp; R Studio</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="install-r-r-studio.html"><a href="install-r-r-studio.html#installing-r-1"><i class="fa fa-check"></i><b>3.2.1</b> Installing R</a></li>
<li class="chapter" data-level="3.2.2" data-path="install-r-r-studio.html"><a href="install-r-r-studio.html#installing-rstudio"><i class="fa fa-check"></i><b>3.2.2</b> Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="successfull-installation.html"><a href="successfull-installation.html"><i class="fa fa-check"></i><b>3.3</b> Successfull Installation</a></li>
<li class="chapter" data-level="3.4" data-path="running-code-in-rstudio.html"><a href="running-code-in-rstudio.html"><i class="fa fa-check"></i><b>3.4</b> Running Code in RStudio</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="running-code-in-rstudio.html"><a href="running-code-in-rstudio.html#the-r-console"><i class="fa fa-check"></i><b>3.4.1</b> The R Console:</a></li>
<li class="chapter" data-level="3.4.2" data-path="running-code-in-rstudio.html"><a href="running-code-in-rstudio.html#r-scripts"><i class="fa fa-check"></i><b>3.4.2</b> R scripts</a></li>
<li class="chapter" data-level="3.4.3" data-path="running-code-in-rstudio.html"><a href="running-code-in-rstudio.html#same-examples-on-your-computer"><i class="fa fa-check"></i><b>3.4.3</b> Same Examples, On Your Computer!</a></li>
<li class="chapter" data-level="3.4.4" data-path="running-code-in-rstudio.html"><a href="running-code-in-rstudio.html#r-markdown"><i class="fa fa-check"></i><b>3.4.4</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="workspace-setup.html"><a href="workspace-setup.html"><i class="fa fa-check"></i><b>3.5</b> Workspace setup</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="workspace-setup.html"><a href="workspace-setup.html#recommended-settings"><i class="fa fa-check"></i><b>3.5.1</b> Recommended Settings</a></li>
<li class="chapter" data-level="3.5.2" data-path="workspace-setup.html"><a href="workspace-setup.html#setting-working-directory"><i class="fa fa-check"></i><b>3.5.2</b> Setting working directory</a></li>
<li class="chapter" data-level="3.5.3" data-path="workspace-setup.html"><a href="workspace-setup.html#create-rstudio-project-and-directories-for-class"><i class="fa fa-check"></i><b>3.5.3</b> Create RStudio Project and directories for class</a></li>
<li class="chapter" data-level="3.5.4" data-path="workspace-setup.html"><a href="workspace-setup.html#some-useful-commands-you-should-know"><i class="fa fa-check"></i><b>3.5.4</b> Some useful commands you should know</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-programming-fundamentals.html"><a href="r-programming-fundamentals.html"><i class="fa fa-check"></i><b>4</b> R Programming Fundamentals</a>
<ul>
<li class="chapter" data-level="4.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html"><i class="fa fa-check"></i><b>4.1</b> Programming Preliminaries</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#r-commands"><i class="fa fa-check"></i><b>4.1.1</b> R Commands</a></li>
<li class="chapter" data-level="4.1.2" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#comments"><i class="fa fa-check"></i><b>4.1.2</b> Comments</a></li>
<li class="chapter" data-level="4.1.3" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#blank-lines"><i class="fa fa-check"></i><b>4.1.3</b> Blank Lines</a></li>
<li class="chapter" data-level="4.1.4" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#case"><i class="fa fa-check"></i><b>4.1.4</b> CaSe SeNsItIvItY</a></li>
<li class="chapter" data-level="4.1.5" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#section"><i class="fa fa-check"></i><b>4.1.5</b> ?</a></li>
<li class="chapter" data-level="4.1.6" data-path="programming-preliminaries.html"><a href="programming-preliminaries.html#section-1"><i class="fa fa-check"></i><b>4.1.6</b> ??</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>4.2</b> Data Types</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-types.html"><a href="data-types.html#numeric"><i class="fa fa-check"></i><b>4.2.1</b> Numeric</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-types.html"><a href="data-types.html#integer"><i class="fa fa-check"></i><b>4.2.2</b> Integer</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-types.html"><a href="data-types.html#character"><i class="fa fa-check"></i><b>4.2.3</b> Character</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-types.html"><a href="data-types.html#logical"><i class="fa fa-check"></i><b>4.2.4</b> Logical</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>4.3</b> Data Structures</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>4.3.1</b> Vectors</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>4.3.2</b> Matrices</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>4.3.3</b> Lists</a></li>
<li class="chapter" data-level="4.3.4" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.3.4</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="r-objects.html"><a href="r-objects.html"><i class="fa fa-check"></i><b>4.4</b> R Objects</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="r-objects.html"><a href="r-objects.html#everything-is-an-object-in-r"><i class="fa fa-check"></i><b>4.4.1</b> <em>Everything</em> is an object in R</a></li>
<li class="chapter" data-level="4.4.2" data-path="r-objects.html"><a href="r-objects.html#assigning-objects"><i class="fa fa-check"></i><b>4.4.2</b> Assigning Objects</a></li>
<li class="chapter" data-level="4.4.3" data-path="r-objects.html"><a href="r-objects.html#attributes"><i class="fa fa-check"></i><b>4.4.3</b> Attributes</a></li>
<li class="chapter" data-level="4.4.4" data-path="r-objects.html"><a href="r-objects.html#null-objects"><i class="fa fa-check"></i><b>4.4.4</b> Null Objects</a></li>
<li class="chapter" data-level="4.4.5" data-path="r-objects.html"><a href="r-objects.html#removing-objects"><i class="fa fa-check"></i><b>4.4.5</b> Removing Objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>5</b> Working with Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="quick-example.html"><a href="quick-example.html"><i class="fa fa-check"></i><b>5.1</b> Quick Example</a></li>
<li class="chapter" data-level="5.2" data-path="reading-writing-data.html"><a href="reading-writing-data.html"><i class="fa fa-check"></i><b>5.2</b> Reading / Writing Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reading-writing-data.html"><a href="reading-writing-data.html#olympic-athletes-example"><i class="fa fa-check"></i><b>5.2.1</b> Olympic Athletes Example</a></li>
<li class="chapter" data-level="5.2.2" data-path="reading-writing-data.html"><a href="reading-writing-data.html#locating-your-data-set"><i class="fa fa-check"></i><b>5.2.2</b> Locating your data set</a></li>
<li class="chapter" data-level="5.2.3" data-path="reading-writing-data.html"><a href="reading-writing-data.html#reading-csv-files"><i class="fa fa-check"></i><b>5.2.3</b> Reading CSV files</a></li>
<li class="chapter" data-level="5.2.4" data-path="reading-writing-data.html"><a href="reading-writing-data.html#writing-csv-files"><i class="fa fa-check"></i><b>5.2.4</b> Writing CSV files</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="summary-statistics.html"><a href="summary-statistics.html"><i class="fa fa-check"></i><b>5.3</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="summary-statistics.html"><a href="summary-statistics.html#quantitative-variables"><i class="fa fa-check"></i><b>5.3.1</b> Quantitative Variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="summary-statistics.html"><a href="summary-statistics.html#categorical-variables"><i class="fa fa-check"></i><b>5.3.2</b> Categorical Variables</a></li>
<li class="chapter" data-level="5.3.3" data-path="summary-statistics.html"><a href="summary-statistics.html#saving-an-rdata-file"><i class="fa fa-check"></i><b>5.3.3</b> Saving an RData file</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-formatting.html"><a href="data-formatting.html"><i class="fa fa-check"></i><b>5.4</b> Data Formatting</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-formatting.html"><a href="data-formatting.html#raw-data-vs.-clean-data."><i class="fa fa-check"></i><b>5.4.1</b> “Raw” data vs. “Clean” data.</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>5.5</b> Indexing</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="indexing.html"><a href="indexing.html#vectors-1"><i class="fa fa-check"></i><b>5.5.1</b> Vectors</a></li>
<li class="chapter" data-level="5.5.2" data-path="indexing.html"><a href="indexing.html#matrices-1"><i class="fa fa-check"></i><b>5.5.2</b> Matrices</a></li>
<li class="chapter" data-level="5.5.3" data-path="indexing.html"><a href="indexing.html#lists-1"><i class="fa fa-check"></i><b>5.5.3</b> Lists</a></li>
<li class="chapter" data-level="5.5.4" data-path="indexing.html"><a href="indexing.html#data-frames-1"><i class="fa fa-check"></i><b>5.5.4</b> Data Frames</a></li>
<li class="chapter" data-level="5.5.5" data-path="indexing.html"><a href="indexing.html#advanced-indexing"><i class="fa fa-check"></i><b>5.5.5</b> Advanced Indexing</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5.6</b> Visualization</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="visualization.html"><a href="visualization.html#one-quantitative-variable"><i class="fa fa-check"></i><b>5.6.1</b> One Quantitative Variable</a></li>
<li class="chapter" data-level="5.6.2" data-path="visualization.html"><a href="visualization.html#two-quantitative-variables"><i class="fa fa-check"></i><b>5.6.2</b> Two Quantitative Variables</a></li>
<li class="chapter" data-level="5.6.3" data-path="visualization.html"><a href="visualization.html#one-categorical-variable"><i class="fa fa-check"></i><b>5.6.3</b> One Categorical Variable</a></li>
<li class="chapter" data-level="5.6.4" data-path="visualization.html"><a href="visualization.html#two-categorical-variables"><i class="fa fa-check"></i><b>5.6.4</b> Two Categorical Variables</a></li>
<li class="chapter" data-level="5.6.5" data-path="visualization.html"><a href="visualization.html#multiple-plots"><i class="fa fa-check"></i><b>5.6.5</b> Multiple plots</a></li>
<li class="chapter" data-level="5.6.6" data-path="visualization.html"><a href="visualization.html#other-types-of-plots"><i class="fa fa-check"></i><b>5.6.6</b> Other types of plots</a></li>
<li class="chapter" data-level="5.6.7" data-path="visualization.html"><a href="visualization.html#saving-images"><i class="fa fa-check"></i><b>5.6.7</b> Saving Images</a></li>
<li class="chapter" data-level="5.6.8" data-path="visualization.html"><a href="visualization.html#plotting-wrap-up"><i class="fa fa-check"></i><b>5.6.8</b> Plotting Wrap Up</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="vignettes.html"><a href="vignettes.html"><i class="fa fa-check"></i><b>5.7</b> Vignettes</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="vignettes.html"><a href="vignettes.html#flood-analysis-example"><i class="fa fa-check"></i><b>5.7.1</b> Flood analysis example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="performing-effective-data-analysis.html"><a href="performing-effective-data-analysis.html"><i class="fa fa-check"></i><b>6</b> Performing Effective Data Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basic-control-flow.html"><a href="basic-control-flow.html"><i class="fa fa-check"></i><b>6.1</b> Basic Control Flow</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="basic-control-flow.html"><a href="basic-control-flow.html#loops"><i class="fa fa-check"></i><b>6.1.1</b> Loops</a></li>
<li class="chapter" data-level="6.1.2" data-path="basic-control-flow.html"><a href="basic-control-flow.html#if-statements"><i class="fa fa-check"></i><b>6.1.2</b> If Statements</a></li>
<li class="chapter" data-level="6.1.3" data-path="basic-control-flow.html"><a href="basic-control-flow.html#formatting-conventions"><i class="fa fa-check"></i><b>6.1.3</b> Formatting Conventions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>6.2</b> Writing Functions</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-components-of-a-function"><i class="fa fa-check"></i><b>6.2.1</b> The Components Of A Function</a></li>
<li class="chapter" data-level="6.2.2" data-path="writing-functions.html"><a href="writing-functions.html#writing-a-function"><i class="fa fa-check"></i><b>6.2.2</b> Writing A Function</a></li>
<li class="chapter" data-level="6.2.3" data-path="writing-functions.html"><a href="writing-functions.html#using-functions-for-data-analysis"><i class="fa fa-check"></i><b>6.2.3</b> Using Functions for Data Analysis</a></li>
<li class="chapter" data-level="6.2.4" data-path="writing-functions.html"><a href="writing-functions.html#function-scope"><i class="fa fa-check"></i><b>6.2.4</b> Function Scope</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="advanced-control-flow.html"><a href="advanced-control-flow.html"><i class="fa fa-check"></i><b>6.3</b> Advanced Control Flow</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="advanced-control-flow.html"><a href="advanced-control-flow.html#applying-over-multiple-dimensions"><i class="fa fa-check"></i><b>6.3.1</b> Applying Over Multiple Dimensions</a></li>
<li class="chapter" data-level="6.3.2" data-path="advanced-control-flow.html"><a href="advanced-control-flow.html#applying-over-data-frame-groups"><i class="fa fa-check"></i><b>6.3.2</b> Applying Over Data Frame Groups</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html"><i class="fa fa-check"></i><b>6.4</b> Working With Popular Packages</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#what-is-a-package"><i class="fa fa-check"></i><b>6.4.1</b> What is a package?</a></li>
<li class="chapter" data-level="6.4.2" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#how-do-i-use-packages"><i class="fa fa-check"></i><b>6.4.2</b> How do I use packages?</a></li>
<li class="chapter" data-level="6.4.3" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#finding-and-using-package-help."><i class="fa fa-check"></i><b>6.4.3</b> Finding and using package help.</a></li>
<li class="chapter" data-level="6.4.4" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#making-beautiful-plots-with-ggplot2"><i class="fa fa-check"></i><b>6.4.4</b> Making Beautiful Plots with <em>ggplot2</em></a></li>
<li class="chapter" data-level="6.4.5" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#organizing-your-data-with-dplyr"><i class="fa fa-check"></i><b>6.4.5</b> Organizing Your Data With <em>dplyr</em></a></li>
<li class="chapter" data-level="6.4.6" data-path="working-with-popular-packages.html"><a href="working-with-popular-packages.html#working-with-character-strings-with-stringr"><i class="fa fa-check"></i><b>6.4.6</b> Working With Character Strings with <em>stringr</em></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Module 1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-functions" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Writing Functions<a href="writing-functions.html#writing-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Throughout this course, we’ve been using various R <em>functions</em>, like <code>print</code>, <code>sum</code>, <code>is.na</code>, and <code>hist</code>.
Each of these functions does different things, but they all obey similar rules.
First we’ll think carefully about what all R functions have in common, then we’ll see how you can write your own functions to suit your needs!</p>
<div id="the-components-of-a-function" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> The Components Of A Function<a href="writing-functions.html#the-components-of-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As an example, consider the <code>sum</code> function:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb495-1"><a href="writing-functions.html#cb495-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb495-2"><a href="writing-functions.html#cb495-2" tabindex="-1"></a><span class="fu">sum</span>(v)</span></code></pre></div>
<pre class="output-style"><code>[1] 6</code></pre>
<p>When R runs this function, it takes a numeric vector and computes the sum of its elements.
The numeric vector is specified by <em>you</em>, the programmer, and it’s formally called an <em>argument</em>.
The argument can be thought of as the “input” into the function.
Some functions use more than one argument, like the <code>seq</code> function:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb497-1"><a href="writing-functions.html#cb497-1" tabindex="-1"></a><span class="co"># Create a sequence of numbers from 3 to 9 </span></span>
<span id="cb497-2"><a href="writing-functions.html#cb497-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">3</span>, <span class="dv">9</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 3 4 5 6 7 8 9</code></pre>
<p>while others functions might have <em>no</em> arguments, like <code>getwd</code>:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb499-1"><a href="writing-functions.html#cb499-1" tabindex="-1"></a><span class="co"># Get the current working directory</span></span>
<span id="cb499-2"><a href="writing-functions.html#cb499-2" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div>
<pre class="output-style"><code>[1] &quot;/Users/lanedrew/Documents/Teaching/STAT158_SU23/Module1&quot;</code></pre>
<p>Other functions can work with different numbers of arguments, like the combine function, <code>c</code>:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb501-1"><a href="writing-functions.html#cb501-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 1</code></pre>
<div class="sourceCode" id="cb503"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb503-1"><a href="writing-functions.html#cb503-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 1 2</code></pre>
<div class="sourceCode" id="cb505"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb505-1"><a href="writing-functions.html#cb505-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 1 2 3</code></pre>
<p>Thinking back to the <code>sum</code> example, we also notice that the function produces a result, which is the sum of the elements of the vector.
This result is called a <em>return value</em>, because it’s something that the function “returns” back to you after it has finished running.
Return values can be assigned to R objects:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb507-1"><a href="writing-functions.html#cb507-1" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">sum</span>(v)</span>
<span id="cb507-2"><a href="writing-functions.html#cb507-2" tabindex="-1"></a><span class="fu">print</span>(s)</span></code></pre></div>
<pre class="output-style"><code>[1] 6</code></pre>
<p>The combine function’s output is a vector, which we can assign to an object called <code>w</code>:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb509-1"><a href="writing-functions.html#cb509-1" tabindex="-1"></a><span class="co"># The return value of c() is assigned to w</span></span>
<span id="cb509-2"><a href="writing-functions.html#cb509-2" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>) </span>
<span id="cb509-3"><a href="writing-functions.html#cb509-3" tabindex="-1"></a><span class="fu">print</span>(w)</span></code></pre></div>
<pre class="output-style"><code>[1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<p>Sometimes a function doesn’t have a return value, as with the <code>rm</code> function:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb511-1"><a href="writing-functions.html#cb511-1" tabindex="-1"></a><span class="co"># rm doesn&#39;t have a return value, which is why result is NULL (i.e. no object)</span></span>
<span id="cb511-2"><a href="writing-functions.html#cb511-2" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">rm</span>(w) </span>
<span id="cb511-3"><a href="writing-functions.html#cb511-3" tabindex="-1"></a><span class="fu">print</span>(result)</span></code></pre></div>
<pre class="output-style"><code>NULL</code></pre>
<div class="reflect">
<p>
Remember what the <code>rm</code> function does?
</p>
</div>
<p>Aside from the <em>arguments</em> and the <em>return value</em> of a function, we can talk about what the function actually <em>does</em>.
The <code>sum</code> function obviously computes the sum of a vector, but the <code>sqrt</code> function takes the square root of a number:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb513-1"><a href="writing-functions.html#cb513-1" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">58</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 7.615773</code></pre>
<p>As we will see shortly, what a function <em>does</em> is determined by the code in its <em>body</em>.
That’s right, functions are basically a collection of code that is combined in a convenient package.
We can even examine the code for a function by typing its name <em>without parentheses</em>.
Here’s the <code>sort</code> function:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb515-1"><a href="writing-functions.html#cb515-1" tabindex="-1"></a><span class="co"># View the code of the sort function</span></span>
<span id="cb515-2"><a href="writing-functions.html#cb515-2" tabindex="-1"></a>sort</span></code></pre></div>
<pre class="output-style"><code>function (x, decreasing = FALSE, ...) 
{
    if (!is.logical(decreasing) || length(decreasing) != 1L) 
        stop(&quot;&#39;decreasing&#39; must be a length-1 logical vector.\nDid you intend to set &#39;partial&#39;?&quot;)
    UseMethod(&quot;sort&quot;)
}
&lt;bytecode: 0x1397b8ca8&gt;
&lt;environment: namespace:base&gt;</code></pre>
<p>Now, there are some things in this output that may be confusing and that we won’t explain in this book, but at least some of the output should look like R code to you!
Here’s another example, the <code>mean</code> function:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb517-1"><a href="writing-functions.html#cb517-1" tabindex="-1"></a><span class="co"># View the code of the mean function (or so we think)</span></span>
<span id="cb517-2"><a href="writing-functions.html#cb517-2" tabindex="-1"></a>mean</span></code></pre></div>
<pre class="output-style"><code>function (x, ...) 
UseMethod(&quot;mean&quot;)
&lt;bytecode: 0x13aa5f678&gt;
&lt;environment: namespace:base&gt;</code></pre>
<p>This example doesn’t seem to have as much R code in it, so where is the code for this function?
The answer is that both <code>sort</code> and <code>mean</code> (and many other R functions) are written in a <em>different</em> programming language, C, which isn’t human readable once it’s compiled.
Don’t worry too much about this, except that we will use the same method to view the code of our own functions later.</p>
<div class="bonus">
<p>
The way we’ve described R functions as being <em>arguments</em>, a
<em>body</em>, and a <em>return value</em>, is mostly correct, but there
is also something called the <em>environment</em> of the function, which
is essentially <em>scoping</em>, if you are familiar with that concept
from other programming languages. We will discuss scoping briefly here
but not in detail. For more on functions, check out <a
href="http://adv-r.had.co.nz/Functions.html">this link</a>.
</p>
</div>
</div>
<div id="writing-a-function" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Writing A Function<a href="writing-functions.html#writing-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The beauty of functions in R is that you can write your own!
All you have to do is specify the arguments, body, and return value for your function.
Here’s a simple example how to define a function:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb519-1"><a href="writing-functions.html#cb519-1" tabindex="-1"></a><span class="co"># Create function which adds 1 to the input argument</span></span>
<span id="cb519-2"><a href="writing-functions.html#cb519-2" tabindex="-1"></a>add_one <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb519-3"><a href="writing-functions.html#cb519-3" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb519-4"><a href="writing-functions.html#cb519-4" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb519-5"><a href="writing-functions.html#cb519-5" tabindex="-1"></a>}</span>
<span id="cb519-6"><a href="writing-functions.html#cb519-6" tabindex="-1"></a><span class="co"># Test out the function</span></span>
<span id="cb519-7"><a href="writing-functions.html#cb519-7" tabindex="-1"></a><span class="fu">add_one</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 101</code></pre>
<p>Here we define a function called <code>add_one</code>, using the assignment operator <code>&lt;-</code>, just like when we define new vectors, data frames, integers, etc.</p>
<ul>
<li>The statement <code>function</code> signifies that we are defining a new function, and the parentheses surround any arguments that this function accepts. Here, we have just one argument called <code>x</code>.</li>
<li>The body of the code has just two commands. The first command creates a new variable <code>y</code> by adding 1 to the argument <code>x</code>. The second command specifies that <code>y</code> will be the return value of the function.</li>
<li>The function is used by writing its name <code>add_one</code> and specifying the arguments in parentheses (100). Technically we are specifying that the value of <code>x</code> is 100.</li>
<li>When the function is run, we see the return value (100 + 1) displayed in the output.</li>
</ul>
<p>Let’s view the code of the function we just wrote:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb521-1"><a href="writing-functions.html#cb521-1" tabindex="-1"></a>add_one</span></code></pre></div>
<pre class="output-style"><code>function(x){
  y &lt;- x + 1
  return(y)
}</code></pre>
<p>Here it shows us exactly the code that we used to create the function.
Let’s use the function a few more times:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb523-1"><a href="writing-functions.html#cb523-1" tabindex="-1"></a>number <span class="ot">&lt;-</span> <span class="fu">add_one</span>(<span class="dv">10</span>)  <span class="co"># Assign the return value of add_one to `number`</span></span>
<span id="cb523-2"><a href="writing-functions.html#cb523-2" tabindex="-1"></a>number</span></code></pre></div>
<pre class="output-style"><code>[1] 11</code></pre>
<div class="sourceCode" id="cb525"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb525-1"><a href="writing-functions.html#cb525-1" tabindex="-1"></a><span class="co"># Nest our function</span></span>
<span id="cb525-2"><a href="writing-functions.html#cb525-2" tabindex="-1"></a><span class="fu">add_one</span>(<span class="fu">add_one</span>(<span class="fu">add_one</span>(<span class="dv">1</span>)))</span></code></pre></div>
<pre class="output-style"><code>[1] 4</code></pre>
<div class="caution">
<p>
It’s possible re-define the built in R functions by choosing a
function name that already exists (<code>print</code> for example), but
this is a <em>very bad idea</em>. This can make your code very difficult
to understand, and potentially unpredictable!
</p>
</div>
<p>Sometimes it’s not necessary to specify a return value.
If you don’t, then R will take any output generated by the last command in the function and return it:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb527-1"><a href="writing-functions.html#cb527-1" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb527-2"><a href="writing-functions.html#cb527-2" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span>  <span class="co"># R will return the result of x + 2 </span></span>
<span id="cb527-3"><a href="writing-functions.html#cb527-3" tabindex="-1"></a>}</span>
<span id="cb527-4"><a href="writing-functions.html#cb527-4" tabindex="-1"></a></span>
<span id="cb527-5"><a href="writing-functions.html#cb527-5" tabindex="-1"></a><span class="fu">add_two</span>(<span class="dv">12</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 14</code></pre>
<p>But you must be careful, because some commands produce no output. Remember that if we type math, then R will print the result:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb529-1"><a href="writing-functions.html#cb529-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<pre class="output-style"><code>[1] 2</code></pre>
<p>but if we assign the result to a variable, R will not print anything (the result is assigned to the variable instead):</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb531-1"><a href="writing-functions.html#cb531-1" tabindex="-1"></a>two <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
<p>This is how it works for function return values as well.
So if we write a statement at the end of a function, but assign the result to a variable, R will not return the value.</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb532-1"><a href="writing-functions.html#cb532-1" tabindex="-1"></a>add_three <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb532-2"><a href="writing-functions.html#cb532-2" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">3</span>  <span class="co"># The results are assigned to y, but y is not returned</span></span>
<span id="cb532-3"><a href="writing-functions.html#cb532-3" tabindex="-1"></a>}</span>
<span id="cb532-4"><a href="writing-functions.html#cb532-4" tabindex="-1"></a></span>
<span id="cb532-5"><a href="writing-functions.html#cb532-5" tabindex="-1"></a><span class="fu">add_three</span>(<span class="dv">4</span>)  <span class="co"># This returns nothing</span></span></code></pre></div>

<div class="bonus">
This is technically <em>not true</em>. The above function <em>does</em> return the value of y, but it is “invisible”. To display the output, you can wrap the result in parentheses like this: <code>(add_three(4))</code>
</div>
<p>Now let’s look at a more complicated example that has two arguments:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb533-1"><a href="writing-functions.html#cb533-1" tabindex="-1"></a><span class="co"># Function to raise x to the y-th power </span></span>
<span id="cb533-2"><a href="writing-functions.html#cb533-2" tabindex="-1"></a>pow <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){   <span class="co"># Here we specify the function has two arguments.</span></span>
<span id="cb533-3"><a href="writing-functions.html#cb533-3" tabindex="-1"></a>  p <span class="ot">&lt;-</span> x<span class="sc">^</span>y</span>
<span id="cb533-4"><a href="writing-functions.html#cb533-4" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb533-5"><a href="writing-functions.html#cb533-5" tabindex="-1"></a>}</span>
<span id="cb533-6"><a href="writing-functions.html#cb533-6" tabindex="-1"></a><span class="co"># Test the arguments with x=2 and y=3</span></span>
<span id="cb533-7"><a href="writing-functions.html#cb533-7" tabindex="-1"></a><span class="fu">pow</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 8</code></pre>
<p>There’s an important lesson to learn from this example.
When we tested the function, R used 2 as the value of <code>x</code> and 3 for the value of <code>y</code> (after all, 2 cubed is 8), and this is because of the <em>order</em> that the arguments were supplied.
When we defined the function, we specified that <code>x</code> and <code>y</code> are the arguments, in that order.
Then when we called the function, we put 2 first and 3 second.
Perhaps this is obvious, but strange things are possible, because R also allows you to specify the arguments <em>by name</em> like so:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb535-1"><a href="writing-functions.html#cb535-1" tabindex="-1"></a><span class="fu">pow</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 8</code></pre>
<p>So far this gives the same result, but watch what happens if we do this instead:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb537-1"><a href="writing-functions.html#cb537-1" tabindex="-1"></a><span class="fu">pow</span>(<span class="at">y =</span> <span class="dv">2</span>, <span class="at">x =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] 9</code></pre>
<p>This time, R computed 3 squared instead of 2 cubed, even though we specified <code>y</code> first and <code>x</code> second.
When you specify parameters by name, <em>R will ignore the order that they are given in</em>.</p>
<div class="bonus">
<p>
R also allows you to specify some arguments by name and some by
position, as long as the position arguments come first. For more, see <a
href="http://adv-r.had.co.nz/Functions.html">here</a>.
</p>
</div>
<div class="progress">
<p>
(No need to turn this in) Write a function called <code>math</code>
which has three arguments, a, b, and c. In the body of the function,
write code which computes a - b * c, store the result as x, then specify
the return value of the function to be x. Demonstrate the use of your
function with a few examples.
</p>
</div>
</div>
<div id="using-functions-for-data-analysis" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Using Functions for Data Analysis<a href="writing-functions.html#using-functions-for-data-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Functions offer many of the same advantages as loops: They allow you to write less code and do more.
Let’s see how functions might be used for data analysis.<br />
Suppose we want to compare deaths between men and women for particular states and age groups.
Here’s a barplot for Colorado in the 45-54 age group:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb539-1"><a href="writing-functions.html#cb539-1" tabindex="-1"></a><span class="co"># Extract just the state and age group of interest</span></span>
<span id="cb539-2"><a href="writing-functions.html#cb539-2" tabindex="-1"></a>covid2 <span class="ot">&lt;-</span> covid[(covid<span class="sc">$</span>State <span class="sc">==</span> <span class="st">&quot;Colorado&quot;</span>) <span class="sc">&amp;</span> (covid<span class="sc">$</span>Age.group <span class="sc">==</span> <span class="st">&quot;45-54 years&quot;</span>),]</span>
<span id="cb539-3"><a href="writing-functions.html#cb539-3" tabindex="-1"></a></span>
<span id="cb539-4"><a href="writing-functions.html#cb539-4" tabindex="-1"></a><span class="co"># Create a bar plot</span></span>
<span id="cb539-5"><a href="writing-functions.html#cb539-5" tabindex="-1"></a><span class="fu">barplot</span>(covid2<span class="sc">$</span>COVID.<span class="fl">19.</span>Deaths,    <span class="co"># Specify column to plot</span></span>
<span id="cb539-6"><a href="writing-functions.html#cb539-6" tabindex="-1"></a>        <span class="at">names.arg =</span> covid2<span class="sc">$</span>Sex,    <span class="co"># Specify bar names</span></span>
<span id="cb539-7"><a href="writing-functions.html#cb539-7" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Sex Comparison: Colorado 45-54 years&quot;</span>,  <span class="co"># Title</span></span>
<span id="cb539-8"><a href="writing-functions.html#cb539-8" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;COVID-19 Deaths&quot;</span>)  <span class="co"># y label</span></span></code></pre></div>
<p><img src="Module1_files/figure-html/unnamed-chunk-549-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>Suppose we wanted to view this information for more states and age groups.
Rather than repeat the above code each time, let’s put it in a function:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb540-1"><a href="writing-functions.html#cb540-1" tabindex="-1"></a><span class="co"># Create a function called plot_fm with two arguments: state and ages</span></span>
<span id="cb540-2"><a href="writing-functions.html#cb540-2" tabindex="-1"></a>plot_fm <span class="ot">&lt;-</span> <span class="cf">function</span>(state, ages){</span>
<span id="cb540-3"><a href="writing-functions.html#cb540-3" tabindex="-1"></a>  covid2 <span class="ot">&lt;-</span> covid[(covid<span class="sc">$</span>State <span class="sc">==</span> state) <span class="sc">&amp;</span> (covid<span class="sc">$</span>Age.group <span class="sc">==</span> ages),]</span>
<span id="cb540-4"><a href="writing-functions.html#cb540-4" tabindex="-1"></a>  <span class="fu">barplot</span>(covid2<span class="sc">$</span>COVID.<span class="fl">19.</span>Deaths, </span>
<span id="cb540-5"><a href="writing-functions.html#cb540-5" tabindex="-1"></a>          <span class="at">names.arg =</span> covid2<span class="sc">$</span>Sex, </span>
<span id="cb540-6"><a href="writing-functions.html#cb540-6" tabindex="-1"></a>          <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">&quot;Sex Comparison:&quot;</span>, state, ages), </span>
<span id="cb540-7"><a href="writing-functions.html#cb540-7" tabindex="-1"></a>          <span class="at">ylab =</span> <span class="st">&quot;COVID-19 Deaths&quot;</span>)</span>
<span id="cb540-8"><a href="writing-functions.html#cb540-8" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb540-9"><a href="writing-functions.html#cb540-9" tabindex="-1"></a>}</span></code></pre></div>
<p>Now let’s try out the code on a few states and age groups:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb541-1"><a href="writing-functions.html#cb541-1" tabindex="-1"></a><span class="fu">plot_fm</span>(<span class="st">&quot;Colorado&quot;</span>, <span class="st">&quot;45-54 years&quot;</span>)</span></code></pre></div>
<p><img src="Module1_files/figure-html/unnamed-chunk-552-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre class="output-style"><code>NULL</code></pre>
<div class="sourceCode" id="cb543"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb543-1"><a href="writing-functions.html#cb543-1" tabindex="-1"></a><span class="fu">plot_fm</span>(<span class="st">&quot;Texas&quot;</span>, <span class="st">&quot;65-74 years&quot;</span>)</span></code></pre></div>
<p><img src="Module1_files/figure-html/unnamed-chunk-553-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre class="output-style"><code>NULL</code></pre>
<div class="sourceCode" id="cb545"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb545-1"><a href="writing-functions.html#cb545-1" tabindex="-1"></a><span class="fu">plot_fm</span>(<span class="st">&quot;New York&quot;</span>, <span class="st">&quot;85 years and over&quot;</span>)</span></code></pre></div>
<p><img src="Module1_files/figure-html/unnamed-chunk-554-1.png" width="576" style="display: block; margin: auto;" /></p>
<pre class="output-style"><code>NULL</code></pre>
<div class="bonus">
<p>
Notice that our function doesn’t actually <em>return</em> anything,
but it does produce a plot while running. The plots produced by this
function are one example of <em>side effects</em>, which are changes
that persist after the function is completed, and that aren’t the return
value.
</p>
</div>

<div class="bonus">
<p>If you tried to run <code>plot_fm("Colorado", "5-14 years")</code>, R would produce an error.
This is because both the <code>COVID.19.Deaths</code> column for that State/Age group is <code>NA</code>, and R needs at least one non-<code>NA</code> value to determine the limits of the y axis.
To get around this error, we could write extra code to manually set the y limits and specify them while plotting, like so:</p>
<p><code>covid2 &lt;- covid[(covid$State == state) &amp; (covid$Age.group == ages),]</code></p>
<p><code># Set the maximum y limit manually, in case there are NA values</code></p>
<p><code>ymax = max(covid2$COVID.19.Deaths, na.rm = T)</code></p>
<p><code>if(ymax == -Inf) ymax &lt;- 1</code></p>
<p><code># Create the plot</code></p>
<p><code>barplot(covid2$COVID.19.Deaths,</code></p>
<p><code>names.arg = covid2$Sex,</code></p>
<p><code>main = paste("Sex Comparison:", state, ages),</code></p>
<p><code>ylab = "COVID-19 Deaths",</code></p>
<p><code>ylim = c(0, ymax))</code></p>
<p><code>return(NULL)</code></p>
</div>
<div class="progress">
<p>
(No need to turn this in) Make a function with arguments for state,
sex, and age group, and print out the COVID 19 deaths, Total Deaths,
Pneumonia Deaths, and Influenza Deaths for that demographic.
</p>
</div>
</div>
<div id="function-scope" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Function Scope<a href="writing-functions.html#function-scope" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There’s another important concept for functions in R, called <em>scope</em>, which is best illustrated through the following example:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb547-1"><a href="writing-functions.html#cb547-1" tabindex="-1"></a>simple_f <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb547-2"><a href="writing-functions.html#cb547-2" tabindex="-1"></a>  XYZ <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb547-3"><a href="writing-functions.html#cb547-3" tabindex="-1"></a>  <span class="fu">return</span>(XYZ)</span>
<span id="cb547-4"><a href="writing-functions.html#cb547-4" tabindex="-1"></a>}</span>
<span id="cb547-5"><a href="writing-functions.html#cb547-5" tabindex="-1"></a></span>
<span id="cb547-6"><a href="writing-functions.html#cb547-6" tabindex="-1"></a><span class="fu">print</span>(XYZ)</span></code></pre></div>
<pre class="sourceCode r error-style"><code>Error in eval(expr, envir, enclos): object 'XYZ' not found
</code></pre>
<div class="sourceCode" id="cb548"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb548-1"><a href="writing-functions.html#cb548-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">simple_f</span>())</span></code></pre></div>
<pre class="output-style"><code>[1] 2</code></pre>
<p>This function has no arguments, but it does create a new object called <code>XYZ</code>, which is returned from the function.
Notice, however, that printing out <code>XYZ</code> gives an error.
This is because the object <code>XYZ</code> only exists in the <em>scope</em> of the function <code>simple_f</code>, and is “forgotten” after the function finishes running.
This is true for any objects created inside any function (with one exception, noted in the bonus block below).
Variables defined outside of functions are in the <em>global scope</em>, which means they can be accessed anywhere, both inside and outside functions:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb550-1"><a href="writing-functions.html#cb550-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb550-2"><a href="writing-functions.html#cb550-2" tabindex="-1"></a></span>
<span id="cb550-3"><a href="writing-functions.html#cb550-3" tabindex="-1"></a>say_hello <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb550-4"><a href="writing-functions.html#cb550-4" tabindex="-1"></a>  <span class="fu">print</span>(y)</span>
<span id="cb550-5"><a href="writing-functions.html#cb550-5" tabindex="-1"></a>}</span>
<span id="cb550-6"><a href="writing-functions.html#cb550-6" tabindex="-1"></a></span>
<span id="cb550-7"><a href="writing-functions.html#cb550-7" tabindex="-1"></a><span class="fu">say_hello</span>()</span></code></pre></div>
<pre class="output-style"><code>[1] &quot;hello&quot;</code></pre>
<p>It’s also important to realize that variables in different scopes can have the same name without conflict.
For example, we can use <code>x</code> as the argument to a function and as a variable outside of the function.
R will search the current scope first, then look outside of the current scope if it can’t find an object.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r chunk-style"><code class="sourceCode r"><span id="cb552-1"><a href="writing-functions.html#cb552-1" tabindex="-1"></a><span class="co"># Define x and y in the global scope</span></span>
<span id="cb552-2"><a href="writing-functions.html#cb552-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb552-3"><a href="writing-functions.html#cb552-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;b&quot;</span></span>
<span id="cb552-4"><a href="writing-functions.html#cb552-4" tabindex="-1"></a></span>
<span id="cb552-5"><a href="writing-functions.html#cb552-5" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb552-6"><a href="writing-functions.html#cb552-6" tabindex="-1"></a>  <span class="fu">print</span>(x)  <span class="co"># This is NOT the global x</span></span>
<span id="cb552-7"><a href="writing-functions.html#cb552-7" tabindex="-1"></a>  <span class="fu">print</span>(y)  <span class="co"># There&#39;s no y in the function scope, this is the global y</span></span>
<span id="cb552-8"><a href="writing-functions.html#cb552-8" tabindex="-1"></a>}</span>
<span id="cb552-9"><a href="writing-functions.html#cb552-9" tabindex="-1"></a></span>
<span id="cb552-10"><a href="writing-functions.html#cb552-10" tabindex="-1"></a><span class="fu">f</span>(<span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<pre class="output-style"><code>[1] &quot;c&quot;
[1] &quot;b&quot;</code></pre>
<p>In the above example, <code>x</code> was defined inside the function <code>f</code> (it’s the name of the first argument), so the global <code>x</code> is ignored.
However, <code>y</code> is not defined inside the function, so R uses the <code>y</code> from the global scope.</p>
<div class="bonus">
<p>
In an earlier chapter, we briefly mentioned the assignment operators
<code>&lt;&lt;-</code> and <code>-&gt;&gt;</code>, but didn’t say what
made them special. It turns out, they are able to assign objects in the
global scope from inside functions. You can test this by altering the
<code>simple_f</code> function in a previous example (above) by
replacing the command <code>XYZ &lt;- 2</code> with the command
<code>XYZ &lt;&lt;- 2</code> and observing the result. This assignment
operator should almost <em>never</em> be used, as it can cause confusion
and unpredictable behavior if used in a more complicated R program.
</p>
</div>
<div class="caution">
<p>
When writing functions, it helps to start simple. It’s easy to make a
complicated function, but when you try to put it into use and it doesn’t
work, debugging the issue can be equally complicated.
</p>
</div>
<div class="bonus">
<p>
You may be familiar with “pointers” in other languages, and the
difference between “pass by value” and “pass by reference”. In most
ordinary circumstances with R, there is <em>only</em> pass by value.
</p>
</div>
<div class="progress">
<p>
(No need to turn this in) When discussing Objects in a previous
chapter, we mentioned that everything in R is an object, and every
object has a <code>mode</code> and <code>length</code>. Pick an R
function, or create your own function, and print its <code>mode</code>
and <code>length</code>.
</p>
</div>
<div class="feedback">
<p>
Any feedback for this section? Click <a
href="https://docs.google.com/forms/d/e/1FAIpQLSePQZ3lIaCIPo9J2owXImHZ_9wBEgTo21A0s-A1ty28u4yfvw/viewform?entry.1684471501=Writing%20Functions">here</a>
</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basic-control-flow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-control-flow.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Module1.pdf", "Module1.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
